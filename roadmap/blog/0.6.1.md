# 0.6.1 - Schema Seeding

## Goal

Create Directus collections matching the TypeScript interfaces from @sbozh/blog.

## Deliverables

- [ ] All collections created in Directus (personas, tags, posts)
- [ ] Proper relations configured (persona M2O, tags M2M)
- [ ] `status` field with "draft"/"published" options
- [ ] Image field connected to Directus assets
- [ ] Seed data imported (at least 4 sample posts)
- [ ] Schema snapshot exported for version control

## Collections

### `personas` Collection

| Field | Type | Interface | Notes |
|-------|------|-----------|-------|
| id | uuid | - | Primary key, auto-generated |
| name | string | Input | "The Founder", "Semenus", etc. |
| slug | string | Input | Unique, URL-safe, indexed |
| color | string | Color | Hex color (#8b5cf6) |
| description | text | Textarea | Optional |

### `tags` Collection

| Field | Type | Interface | Notes |
|-------|------|-----------|-------|
| id | uuid | - | Primary key, auto-generated |
| name | string | Input | Display name |
| slug | string | Input | Unique, URL-safe, indexed |

### `posts` Collection

| Field | Type | Interface | Notes |
|-------|------|-----------|-------|
| id | uuid | - | Primary key, auto-generated |
| status | string | Dropdown | "published" or "draft" |
| title | string | Input | Post title |
| slug | string | Input | Unique, URL-safe, indexed |
| excerpt | text | Textarea | Short description |
| content | text | Code/WYSIWYG | MDX content |
| date_published | datetime | DateTime | Publication date |
| reading_time | integer | Input | Minutes to read |
| persona | m2o | Related Values | Many-to-one to personas |
| tags | m2m | Related Values | Many-to-many to tags |
| image | file | Image | Directus asset reference |

### `posts_tags` Junction (auto-created by Directus)

| Field | Type |
|-------|------|
| id | integer |
| posts_id | uuid |
| tags_id | uuid |

## Seed Data

Create `apps/web/directus/seed/` with JSON files:

### personas.json

```json
[
  { "name": "The Founder", "slug": "founder", "color": "#8b5cf6" },
  { "name": "Kagurame Sbozh", "slug": "kagurame", "color": "#f59e0b" },
  { "name": "Semenus", "slug": "semenus", "color": "#22c55e" },
]
```

### tags.json

```json
[
  { "name": "Tech", "slug": "tech" },
  { "name": "Startup", "slug": "startup" },
  { "name": "Philosophy", "slug": "philosophy" },
  { "name": "Personal", "slug": "personal" }
]
```

### posts.json

Import content from `packages/blog/src/data/mock-data.ts`

## Schema Snapshot

Export schema for version control:

```bash
npx directus schema snapshot ./snapshot.yaml
```

Store in `apps/web/directus/schema/snapshot.yaml`

## Acceptance Criteria

- [ ] All 3 collections exist with correct fields
- [ ] Persona M2O relation works (post.persona returns full object)
- [ ] Tags M2M relation works (post.tags returns array of tag objects)
- [ ] Status dropdown shows "draft" and "published" options
- [ ] Image upload works and stores in Directus assets
- [ ] All 4 personas seeded
- [ ] All 4 tags seeded
- [ ] At least 4 posts seeded with relations
- [ ] Schema snapshot committed to repo
